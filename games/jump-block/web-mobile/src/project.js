require=function e(t,n,o){function c(i,a){if(!n[i]){if(!t[i]){var r="function"==typeof require&&require;if(!a&&r)return r(i,!0);if(s)return s(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[i]={exports:{}};t[i][0].call(l.exports,function(e){var n=t[i][1][e];return c(n?n:e)},l,l.exports,e,t,n,o)}return n[i].exports}for(var s="function"==typeof require&&require,i=0;i<o.length;i++)c(o[i]);return c}({BackBtn:[function(e,t,n){"use strict";cc._RFpush(t,"e74f1JEhuhHFa9UbHGcwPwZ","BackBtn"),cc.Class({"extends":cc.Component,properties:{},onLoad:function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onBackClick.bind(this))},onBackClick:function(){cc.director.loadScene("GameStart")}}),cc._RFpop()},{}],Block:[function(e,t,n){"use strict";cc._RFpush(t,"656bdDb+lFIFoaXN1OhBa/K","Block"),cc.Class({"extends":cc.Component,properties:function(){return{DEFAULT_POSITION_X:{"default":-450},mSpeed:0,mJumpHeight:0,mJumpDuration:0}},onLoad:function(){var e=this;e.node.scaleX=-1,e.jumpAction=e.createJumpAction(),e.isJumping=!1,e.mGame,cc.director.getCollisionManager().enabled=!0,cc.director.getCollisionManager().enabledDebugDraw=!1,this.touchingNumber=0,cc.eventManager.addListener({event:cc.EventListener.KEYBOARD,onKeyPressed:function(t,n){switch(t){case cc.KEY.space:e.jump()}}},e.node),null!=e.mGame&&e.mGame.node.on(cc.Node.EventType.TOUCH_START,this.onGameViewClick.bind(this))},onGameViewClick:function(){this.jump()},update:function(e){if(this.mGame&&!this.mGame.isPause){var t=this.mSpeed*e;this.node.x+=t}},createJumpAction:function(){console.log("jump");var e=this;this.moveUpAction=cc.moveBy(this.mJumpDuration,cc.p(0,this.mJumpHeight)).easing(cc.easeCubicActionOut()),this.rotate180Action=cc.rotateBy(this.mJumpDuration,90),this.moveDownAction=cc.moveBy(this.mJumpDuration,cc.p(0,-this.mJumpHeight)).easing(cc.easeCubicActionIn()),this.upAndRotate=cc.spawn(this.moveUpAction,this.rotate180Action),this.downAndRotate=cc.spawn(this.moveDownAction,this.rotate180Action);var t=cc.callFunc(function(t,n){e.isJumping=!1},this,100);return cc.sequence(this.upAndRotate,this.downAndRotate,t)},jump:function(){var e=this;e.isJumping||(e.isJumping=!0,this.node.runAction(this.jumpAction))},resetSelf:function(){this.node.active=!1,this.node.stopAllActions(),this.node.x=this.DEFAULT_POSITION_X,this.mGame?(this.node.y=this.mGame.getGroundY(this.node),console.log("resetSelf y="+this.node.y)):console.warn("resetSelf mGame is null"),this.node.setRotation(0),this.isJumping=!1,this.node.active=!0},onCollisionEnter:function(e){console.log("onCollisionEnter "),this.node.color=cc.Color.RED,this.touchingNumber++,this.resetSelf(),this.mGame.lossLife()},onCollisionStay:function(e){},onCollisionExit:function(){this.touchingNumber--,0===this.touchingNumber&&(this.node.color=cc.Color.WHITE)},pause:function(){},setSpeed:function(e){e>0&&(this.mSpeed=e)}}),cc._RFpop()},{}],Db:[function(e,t,n){"use strict";cc._RFpush(t,"a4e82GKkZhJTrasK1utNGpI","Db");var o={put:function(e,t){console.log("put :"+e+"  "+t),cc.sys.localStorage.setItem(e,t)},get:function(e){return console.log("get:"+e),cc.sys.localStorage.getItem(e)}};t.exports=o,cc._RFpop()},{}],GameOver:[function(e,t,n){"use strict";cc._RFpush(t,"df3fbk75QRGsI5Kq1gNj341","GameOver");var o=e("Global"),c=e("Db"),s="Key_of_data";cc.Class({"extends":cc.Component,properties:{mNewRecordNode:{"default":null,type:cc.Node},mBestScoreLabel:{"default":null,type:cc.Label},mScore:{"default":null,type:cc.Label},mRestartBtn:{"default":null,type:cc.Node},mStageLabel:{"default":null,type:cc.Label}},onLoad:function(){console.log("onLoad GameOver "+o.gameOverArg.trytimes);var e=o.gameOverArg.stage;this.mStageLabel.string=e||1;var t=this.readLocalData();t.stage=t.stage||1,t.stage<e?(this.mNewRecordNode.active=!0,this.saveToLocal(o.gameOverArg.score,o.gameOverArg.trytimes,e),this.mBestScoreLabel.string=e):(this.mNewRecordNode.active=!1,this.mBestScoreLabel.string=t.stage)},update:function(e){},saveToLocal:function(e,t,n){var o={score:e,trytimes:t,stage:n};c.put(s,JSON.stringify(o))},readLocalData:function(){var e=JSON.parse(c.get(s));return e=e?e:{score:0,trytimes:0,stage:1},console.log("localData "+JSON.stringify(e)),e}}),cc._RFpop()},{Db:"Db",Global:"Global"}],GameStart:[function(e,t,n){"use strict";cc._RFpush(t,"9770dwws6dCLI0ugjA4DNDA","GameStart");var o=e("Global");cc.Class({"extends":cc.Component,properties:{mRankBtn:{"default":null,type:cc.Node},mSoundOnBtn:{"default":null,type:cc.Node},mSoundOffBtn:{"default":null,type:cc.Node}},onLoad:function(){var e=this;e.mRankBtn.on(cc.Node.EventType.TOUCH_END,e.onRankClick.bind(this)),e.mSoundOnBtn.on(cc.Node.EventType.TOUCH_END,e.onSoundCheckBtnClick.bind(this)),e.mSoundOffBtn.on(cc.Node.EventType.TOUCH_END,e.onSoundOffClick.bind(this))},onRankClick:function(){cc.director.loadScene("Rank")},onSoundCheckBtnClick:function(){this.toggleSound()},onSoundOffClick:function(){this.toggleSound()},toggleSound:function(){o.gameMainArg.isSoundOn=!o.gameMainArg.isSoundOn;var e=o.gameMainArg.isSoundOn;console.log("isOn "+e),this.mSoundOnBtn.active=e,this.mSoundOffBtn.active=!e}}),cc._RFpop()},{Global:"Global"}],Game:[function(e,t,n){"use strict";cc._RFpush(t,"2a6d9iKgFNDBI2zZ94PpVQW","Game");var o=(e("Helpers"),e("Global")),c=e("StageCreator"),s=e("Log"),i=!0;cc.Class({"extends":cc.Component,properties:{mBlock:{"default":null,type:cc.Node},mGround:{"default":null,type:cc.Node},mMonsterBlockPrefs:{"default":[],type:cc.Prefab},randomRange:{"default":null,x:500,y:200},mScoreLabel:{"default":null,type:cc.Label},mTryTimesLabel:{"default":null,type:cc.Label},mScore:0,mTryTimes:{"default":20,type:cc.Integer},mMiddleNode:{"default":null,type:cc.Node},mPauseBtn:{"default":null,type:cc.Node},mResumeBtn:{"default":null,type:cc.Node},mBackBtn:{"default":null,type:cc.Node},mPauseView:{"default":null,type:cc.Node},END_POSITION:{"default":500},mCurrentStage:{"default":1,type:cc.Integer},mStageValueNode:{"default":null,type:cc.Label},mIsPaused:{"default":!1},mAudioPlayer:{"default":null,type:cc.AudioSource},mAudioPause:{"default":null,url:cc.AudioClip}},onLoad:function(){var e=this;e.mBlockComp=e.mBlock.getComponent("Block"),e.mBlockComp.mGame=this,e.mPauseBtn.on(cc.Node.EventType.TOUCH_END,e.onPauseClick.bind(this)),e.mResumeBtn.on(cc.Node.EventType.TOUCH_END,e.onResumeClick.bind(this)),e.mBackBtn.on(cc.Node.EventType.TOUCH_END,e.onBackClick.bind(this)),i=o.gameMainArg.isSoundOn},start:function(){var e=this;console.log("start-resetBlock"),c.init(this.node,e.mGround,e.mMonsterBlockPrefs),c.create(this.mCurrentStage),e.mBlockComp.setSpeed(c.getSpeed()),e.resetBlock(),e.mPauseView.active=!1,this.mTryTimesLabel.string=this.mTryTimes,i&&this.mAudioPlayer.play()},update:function(e){this.mBlock.x>this.END_POSITION&&(this.mBlock.x=this.mBlockComp.DEFAULT_POSITION_X,this.addStage(),this.addLife(),c.clearStage(),c.create(this.mCurrentStage))},initMonsters:function(){},getGroundY:function(e){return c.getGroundY(e)},resetBlock:function(){console.log("Game  resetBlock try:"+this.mTryTimes);var e=this.mBlockComp;e&&(e.mGame=this,e.resetSelf())},lossLife:function(){console.log("lossLife "+this.mTryTimes),this.mTryTimes--,this.mTryTimes<=0?this.gameOver():this.mTryTimesLabel.string=this.mTryTimes},addLife:function(){this.mTryTimes++,this.mTryTimesLabel.string=this.mTryTimes},addStage:function(){this.mCurrentStage++,this.mStageValueNode.string=this.mCurrentStage},gameOver:function(){this.mBlock.stopAllActions(),o.gameOverArg.score=this.mScore,o.gameOverArg.stage=this.mCurrentStage,o.gameOverArg.trytimes=this.mTryTimes,cc.director.loadScene("GameOver"),i&&this.mAudioPlayer.pause()},onPauseClick:function(){this.mIsPaused||(this.mIsPaused=!0,this.mPauseView.active=!0,cc.audioEngine.playEffect(this.mAudioPause,!1),i&&this.mAudioPlayer.pause(),this.node.enable=!1,s.d("pause director"),cc.director.pause())},onResumeClick:function(){this.mIsPaused&&(this.mPauseView.active=!1,cc.director.resume(),i&&this.mAudioPlayer.resume(),this.mIsPaused=!1)},onBackClick:function(){this.mPauseView.active=!1,this.mIsPaused=!1,cc.director.resume(),cc.director.loadScene("GameStart")},startResumeCountDown:function(){s.d("Start CountDown"),cc.director.getScheduler().schedule(this.resumeCountDownCallback,this,3,1,1,!0)},resumeCountDownCallback:function(){this.node.enable=!0,s.d("resume director"),cc.director.resume(),i&&this.mAudioPlayer.resume(),this.mIsPaused=!1}}),cc._RFpop()},{Global:"Global",Helpers:"Helpers",Log:"Log",StageCreator:"StageCreator"}],Global:[function(e,t,n){"use strict";cc._RFpush(t,"9ad14omXlVNQ4JznzGhRRjw","Global"),t.exports={gameOverArg:{score:0,trytimes:0},gameMainArg:{isSoundOn:!0}},cc._RFpop()},{}],Helpers:[function(e,t,n){"use strict";cc._RFpush(t,"1fc9eY87nxHX4JuOsolDTtg","Helpers");var o={getRandomInt:function(e){return parseInt(cc.random0To1()*e)}};t.exports=o,cc._RFpop()},{}],Log:[function(e,t,n){"use strict";cc._RFpush(t,"b990727469IEo/8qUqJygPZ","Log"),t.exports={debug:!0,setDebug:function(e){this.debug=e},d:function(){if(this.debug)if(1==arguments.length)console.log(arguments[0]);else{for(var e="",t=0;t<arguments.length;t++)e=e+JSON.stringify(arguments[t])+" ";console.log(e)}}},cc._RFpop()},{}],Monster:[function(e,t,n){"use strict";cc._RFpush(t,"56a4crGbatEJpehW7hZOuMD","Monster"),cc.Class({"extends":cc.Component,properties:{},onLoad:function(){cc.director.getCollisionManager().enabled=!0,cc.director.getCollisionManager().enabledDebugDraw=!0,this.touchingNumber=0},update:function(e){},onCollisionEnter:function(e){console.log("onCollisionEnter "),this.node.color=cc.Color.RED,this.touchingNumber++},onCollisionStay:function(e){},onCollisionExit:function(){this.touchingNumber--,0===this.touchingNumber&&(this.node.color=cc.Color.WHITE)}}),cc._RFpop()},{}],PersistNode:[function(e,t,n){"use strict";cc._RFpush(t,"6c1edIeOk1Hb6IUu5R8phTJ","PersistNode"),cc.Class({"extends":cc.Component,properties:{},onLoad:function(){},setGameOverArg:function(e){this.gameOverArg=e},getGameOverArg:function(){var e=this.gameOverArg;return this.gameOverArg=void 0,e}}),cc._RFpop()},{}],Rank:[function(e,t,n){"use strict";cc._RFpush(t,"806a4A/eTpD+LZdl2gak5rJ","Rank"),cc.Class({"extends":cc.Component,properties:{mBackBtn:{"default":null,type:cc.Node}},onLoad:function(){var e=this;e.mBackBtn.on(cc.Node.EventType.TOUCH_END,e.onBackClick.bind(this))},onBackClick:function(){console.log("onBack"),cc.director.loadScene("GameStart")}}),cc._RFpop()},{}],StageCreator:[function(e,t,n){"use strict";function o(e,t){var n=[],o=e*f,c=N+o;B=k+c;var s=y-c-R;n.push(B);for(var i=parseInt(s/(R+o+t))+1,a=1;a<i;a++)n[a]=n[a-1]+o+R+g.getRandomInt(t);return n}function c(e,t){return e=e||0,-170+g.getRandomInt(e)}function s(e){return e=e||0,70+g.getRandomInt(e)}function i(e){return e=e||0,300+g.getRandomInt(e)}function a(e){var t=-200,n=(170+g.getRandomInt(50),t);switch(e){case 1:O.push(u(p[0],n=s(-20)));break;case 2:O.push(u(p[1],n=s(10)));break;case 3:O.push(u(p[2],n=s(10)));break;case 4:O.push(u(p[0],n=c(20))),O.push(u(p[2],n=i()));break;case 5:O.push(u(p[1],n=c(20))),O.push(u(p[2],n=i()));break;case 6:O.push(u(p[0],n=c(20))),O.push(u(p[1],n=i(40)));break;case 7:O.push(u(p[0],n=c(50))),O.push(u(p[2],n=s(30)));break;case 8:O.push(u(p[1],n=gLef(20))),O.push(u(p[0],n=s(20)));break;case 9:O.push(u(p[2],n=s(30))),O.push(u(p[1],n=i(50)));break;case 10:O.push(u(p[0],c(-20))),O.push(u(p[1],s(0))),O.push(u(p[2],i(20)));break;case 100:for(var a=o(b,-60),l=0;l<a.length;l++)O.push(r(a[l]));break;default:e<20?(O.push(r(c(-10),3)),O.push(r(s(20))),O.push(r(i(80),3))):e<30?(O.push(r(c(-10),3)),O.push(r(s(70))),O.push(r(i(50),3))):e<40?(O.push(r(c(20),3)),O.push(r(s(10))),O.push(r(i(80),3))):(O.push(r(c(40),3)),O.push(r(s(35))),O.push(r(i(10),3)))}}function r(e,t){for(var n=g.getRandomInt(p.length);t==n;)n=g.getRandomInt(p.length);return console.log("index :"+n),u(p[n],e)}function u(e,t){cc.log("createMonster "+t);var n=cc.instantiate(e);d.addChild(n);var o=m(n);return console.log("monster getGroundY   "+o),n.setPosition(cc.p(t,o)),n.tag=T,console.log("monster:"+n.x+"    "+n.y),n}function l(){console.log("clearStage remove monster count:"+O.length);for(var e=0;e<O.length;e++)d.removeChild(O[e]);O=[]}function m(e){return console.log(e+" "+h+"  "+d),console.log(h.height+"+  "+e.height+"/2- "+d.height+"/2"),h.y+h.height/2+e.height/2}cc._RFpush(t,"f8301C7SrpP3qhMVQDxiiUN","StageCreator");var d,h,p,g=e("Helpers"),f=.6,C=300,S=350,v=400,b=v,y=960,k=-y/2,N=150,B=-170,R=50,T=4096,O=[];t.exports={init:function(e,t,n){d=e,h=t,p=n},create:a,clearStage:l,getGroundY:m,setSpeed:function(e){b=e<=C?C:e<S?S:v},getSpeed:function(){return b},getMaxSpeed:function(){return v}},cc._RFpop()},{Helpers:"Helpers"}],StartBtn:[function(e,t,n){"use strict";cc._RFpush(t,"307d2aM5gRJKq2nJh/6VNUK","StartBtn"),cc.Class({"extends":cc.Component,properties:{},onLoad:function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_END,e.onStartClick.bind(this))},onStartClick:function(){console.log("game start"),cc.director.loadScene("GameMain")}}),cc._RFpop()},{}]},{},["Helpers","Game","StartBtn","Monster","Block","PersistNode","Rank","GameStart","Global","Db","Log","GameOver","BackBtn","StageCreator"]);