require=function e(t,o,n){function c(s,i){if(!o[s]){if(!t[s]){var a="function"==typeof require&&require;if(!i&&a)return a(s,!0);if(r)return r(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=o[s]={exports:{}};t[s][0].call(l.exports,function(e){var o=t[s][1][e];return c(o?o:e)},l,l.exports,e,t,o,n)}return o[s].exports}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)c(n[s]);return c}({Block:[function(e,t,o){"use strict";cc._RFpush(t,"656bdDb+lFIFoaXN1OhBa/K","Block"),cc.Class({"extends":cc.Component,properties:function(){return{DEFAULT_POSITION_X:{"default":-450},mSpeed:0,mJumpHeight:0,mJumpDuration:0}},onLoad:function(){var e=this;e.node.scaleX=-1,e.jumpAction=e.createJumpAction(),e.isJumping=!1,e.mGame,cc.director.getCollisionManager().enabled=!0,cc.director.getCollisionManager().enabledDebugDraw=!0,this.touchingNumber=0,cc.eventManager.addListener({event:cc.EventListener.KEYBOARD,onKeyPressed:function(t,o){switch(t){case cc.KEY.space:e.jump()}}},e.node),null!=e.mGame&&e.mGame.node.on(cc.Node.EventType.TOUCH_START,this.onGameViewClick.bind(this))},onGameViewClick:function(){this.jump()},update:function(e){var t=this.mSpeed*e;this.node.x+=t},createJumpAction:function(){console.log("jump");var e=this;this.moveUpAction=cc.moveBy(this.mJumpDuration,cc.p(0,this.mJumpHeight)).easing(cc.easeCubicActionOut()),this.rotate180Action=cc.rotateBy(this.mJumpDuration,90),this.moveDownAction=cc.moveBy(this.mJumpDuration,cc.p(0,-this.mJumpHeight)).easing(cc.easeCubicActionIn()),this.upAndRotate=cc.spawn(this.moveUpAction,this.rotate180Action),this.downAndRotate=cc.spawn(this.moveDownAction,this.rotate180Action);var t=cc.callFunc(function(t,o){e.isJumping=!1},this,100);return cc.sequence(this.upAndRotate,this.downAndRotate,t)},jump:function(){var e=this;e.isJumping||(e.isJumping=!0,this.node.runAction(this.jumpAction))},resetSelf:function(){console.log("xkj block block"),this.node.active=!1,this.node.stopAllActions(),this.node.x=this.DEFAULT_POSITION_X,this.node.y=this.mGame.getGroundY(this.node),this.node.setRotation(0),this.isJumping=!1,this.node.active=!0,this.mGame.lossLife()},onCollisionEnter:function(e){console.log("onCollisionEnter "),this.node.color=cc.Color.RED,this.touchingNumber++,this.resetSelf()},onCollisionStay:function(e){this.resetSelf()},onCollisionExit:function(){this.touchingNumber--,0===this.touchingNumber&&(this.node.color=cc.Color.WHITE)}}),cc._RFpop()},{}],Db:[function(e,t,o){"use strict";cc._RFpush(t,"a4e82GKkZhJTrasK1utNGpI","Db");var n={put:function(e,t){console.log("put :"+e+"  "+t),cc.sys.localStorage.setItem(e,t)},get:function(e){return console.log("get:"+e),cc.sys.localStorage.getItem(e)}};t.exports=n,cc._RFpop()},{}],GameOver:[function(e,t,o){"use strict";cc._RFpush(t,"df3fbk75QRGsI5Kq1gNj341","GameOver");var n=e("Global"),c=e("Db"),r="Key_of_data";cc.Class({"extends":cc.Component,properties:{mTitle:{"default":null,type:cc.Label},mScore:{"default":null,type:cc.Label},mRestartBtn:{"default":null,type:cc.Node},mStageLabel:{"default":null,type:cc.Label}},onLoad:function(){console.log("onLoad GameOver "+n.gameOverArg.trytimes),this.mScore.string="Score: "+n.gameOverArg.score;var e="TryTimes: "+n.gameOverArg.trytimes;this.mStageLabel.string="Stage: "+n.gameOverArg.stage||0,this.saveToLocal(n.gameOverArg.score,n.gameOverArg.trytimes,n.gameOverArg.stage);var t=this.readLocalData();e+="\n\n LastTime:\n Score:"+t.score+" \nTryTimes: "+t.trytimes,this.mRestartBtn.on(cc.Node.EventType.TOUCH_END,this.onRestartClick.bind(this))},update:function(e){},onRestartClick:function(){cc.director.loadScene("GameMain")},saveToLocal:function(e,t,o){var n={score:e,trytimes:t,stage:o};c.put(r,JSON.stringify(n))},readLocalData:function(){var e=JSON.parse(c.get(r));return console.log("localData "+JSON.stringify(e)),e=e?e:{score:0,trytimes:0,stage:1}}}),cc._RFpop()},{Db:"Db",Global:"Global"}],Game:[function(e,t,o){"use strict";cc._RFpush(t,"2a6d9iKgFNDBI2zZ94PpVQW","Game");var n=(e("Helpers"),e("Global")),c=e("StageCreator");cc.Class({"extends":cc.Component,properties:{mBlock:{"default":null,type:cc.Node},mGround:{"default":null,type:cc.Node},mMonsterBlockPrefs:{"default":[],type:cc.Prefab},randomRange:{"default":null,x:500,y:200},mScoreLabel:{"default":null,type:cc.Label},mTryTimesLabel:{"default":null,type:cc.Label},mScore:0,mTryTimes:{"default":0,type:cc.Integer},mMiddleNode:{"default":null,type:cc.Node},END_POSITION:{"default":500},mCurrentStage:{"default":1,type:cc.Integer},mStageValueNode:{"default":null,type:cc.Label}},onLoad:function(){self=this,self.mBlockComp=self.mBlock.getComponent("Block"),self.resetBlock(),c.init(this.node,self.mGround,self.mMonsterBlockPrefs),c.create(this.mCurrentStage)},update:function(e){this.mBlock.x>this.END_POSITION&&(this.mBlock.x=this.mBlockComp.DEFAULT_POSITION_X,this.addStage(),c.clearStage(),c.create(this.mCurrentStage))},initMonsters:function(){},getGroundY:function(e){return c.init(this.node,self.mGround,self.mMonsterBlockPrefs),c.getGroundY(e)},resetBlock:function(){console.log("Game  resetBlock try:"+this.mTryTimes);var e=this.mBlock.getComponent("Block");e.mGame=this,e.resetSelf()},lossLife:function(){console.log("lossLife "+this.mTryTimes),this.mTryTimes<=0?this.gameOver():(this.mTryTimesLabel.string=this.mTryTimes,this.mTryTimes--)},addStage:function(){this.mCurrentStage++,this.mStageValueNode.string=this.mCurrentStage},gameOver:function(){this.mBlock.stopAllActions(),n.gameOverArg.score=this.mScore,n.gameOverArg.stage=this.mCurrentStage,n.gameOverArg.trytimes=this.mTryTimes,cc.director.loadScene("GameOver")}}),cc._RFpop()},{Global:"Global",Helpers:"Helpers",StageCreator:"StageCreator"}],Global:[function(e,t,o){"use strict";cc._RFpush(t,"9ad14omXlVNQ4JznzGhRRjw","Global"),t.exports={gameOverArg:{score:0,trytimes:0}},cc._RFpop()},{}],Helpers:[function(e,t,o){"use strict";cc._RFpush(t,"1fc9eY87nxHX4JuOsolDTtg","Helpers");var n={getRandomInt:function(e){return parseInt(cc.random0To1()*e)}};t.exports=n,cc._RFpop()},{}],Monster:[function(e,t,o){"use strict";cc._RFpush(t,"56a4crGbatEJpehW7hZOuMD","Monster"),cc.Class({"extends":cc.Component,properties:{},onLoad:function(){cc.director.getCollisionManager().enabled=!0,cc.director.getCollisionManager().enabledDebugDraw=!0,this.touchingNumber=0},update:function(e){},onCollisionEnter:function(e){console.log("onCollisionEnter "),this.node.color=cc.Color.RED,this.touchingNumber++},onCollisionStay:function(e){},onCollisionExit:function(){this.touchingNumber--,0===this.touchingNumber&&(this.node.color=cc.Color.WHITE)}}),cc._RFpop()},{}],PersistNode:[function(e,t,o){"use strict";cc._RFpush(t,"6c1edIeOk1Hb6IUu5R8phTJ","PersistNode"),cc.Class({"extends":cc.Component,properties:{},onLoad:function(){},setGameOverArg:function(e){this.gameOverArg=e},getGameOverArg:function(){var e=this.gameOverArg;return this.gameOverArg=void 0,e}}),cc._RFpop()},{}],StageCreator:[function(e,t,o){"use strict";function n(e){return e=e||0,-170+g.getRandomInt(e)}function c(e){return e=e||0,70+g.getRandomInt(e)}function r(e){return e=e||0,300+g.getRandomInt(e)}function s(e){var t=-200,o=(170+g.getRandomInt(50),t);switch(e){case 1:f.push(a(p[0],o=c(-20)));break;case 2:f.push(a(p[1],o=c(10)));break;case 3:f.push(a(p[2],o=c(10)));break;case 4:f.push(a(p[0],o=n(20))),f.push(a(p[2],o=r()));break;case 5:f.push(a(p[1],o=n(20))),f.push(a(p[2],o=r()));break;case 6:f.push(a(p[0],o=n(20))),f.push(a(p[1],o=r(40)));break;case 7:f.push(a(p[0],o=n(50))),f.push(a(p[2],o=c(30)));break;case 8:f.push(a(p[1],o=n(20))),f.push(a(p[0],o=c(20)));break;case 9:f.push(a(p[2],o=c(30))),f.push(a(p[1],o=r(50)));break;case 10:f.push(a(p[0],n(-20))),f.push(a(p[1],c(0))),f.push(a(p[2],r(20)));break;default:f.push(i(n(-10))),f.push(i(c(0))),f.push(i(r(30)))}}function i(e){var t=g.getRandomInt(p.length);return console.log("index :"+t),a(p[t],e)}function a(e,t){cc.log("createMonster "+t);var o=cc.instantiate(e);m.addChild(o);var n=l(o);return o.setPosition(cc.p(t,n)),o.tag=d,console.log("monster:"+o.x+"    "+o.y),o}function u(){console.log("clearStage remove monster count:"+f.length);for(var e=0;e<f.length;e++)m.removeChild(f[e]);f=[]}function l(e){return h.height+e.height/2-m.height/2}cc._RFpush(t,"f8301C7SrpP3qhMVQDxiiUN","StageCreator");var m,h,p,g=e("Helpers"),d=4096,f=[];t.exports={init:function(e,t,o){m=e,h=t,p=o},create:s,clearStage:u,getGroundY:l},cc._RFpop()},{Helpers:"Helpers"}]},{},["Helpers","Game","Monster","Block","PersistNode","Global","Db","GameOver","StageCreator"]);